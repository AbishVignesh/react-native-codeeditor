{"version":3,"file":"index.js","sources":["node_modules/@babel/runtime/helpers/defineProperty.js","node_modules/@babel/runtime/helpers/objectSpread.js","node_modules/@babel/runtime/helpers/classCallCheck.js","node_modules/@babel/runtime/helpers/createClass.js","node_modules/@babel/runtime/helpers/typeof.js","node_modules/@babel/runtime/helpers/assertThisInitialized.js","node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","node_modules/@babel/runtime/helpers/getPrototypeOf.js","node_modules/@babel/runtime/helpers/superPropBase.js","node_modules/@babel/runtime/helpers/get.js","node_modules/@babel/runtime/helpers/setPrototypeOf.js","node_modules/@babel/runtime/helpers/inherits.js","node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","node_modules/@babel/runtime/helpers/iterableToArray.js","node_modules/@babel/runtime/helpers/nonIterableSpread.js","node_modules/@babel/runtime/helpers/toConsumableArray.js","node_modules/@actualwave/codemirror-package/index.js","source/assets/webview.js","source/event/EditorEvent.js","source/event/ResponseListener.js","source/event/Request.js","source/event/EditorRequests.js","source/event/WebViewAPI.js","source/view/BlockingView.js","source/view/utils.js","source/view/BaseEditorView.js","source/view/CodeEditor.js"],"sourcesContent":["function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","var defineProperty = require(\"./defineProperty\");\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}\n\nmodule.exports = _objectSpread;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","function _typeof2(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;","var _typeof = require(\"../helpers/typeof\");\n\nvar assertThisInitialized = require(\"./assertThisInitialized\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn;","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;","var getPrototypeOf = require(\"./getPrototypeOf\");\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}\n\nmodule.exports = _superPropBase;","var getPrototypeOf = require(\"./getPrototypeOf\");\n\nvar superPropBase = require(\"./superPropBase\");\n\nfunction _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    module.exports = _get = Reflect.get;\n  } else {\n    module.exports = _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}\n\nmodule.exports = _get;","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits;","function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nmodule.exports = _arrayWithoutHoles;","function _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nmodule.exports = _nonIterableSpread;","var arrayWithoutHoles = require(\"./arrayWithoutHoles\");\n\nvar iterableToArray = require(\"./iterableToArray\");\n\nvar nonIterableSpread = require(\"./nonIterableSpread\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray;","'use strict';\r\n\r\nconst moduleBundles = require('./assets/modules.json');\r\nconst editorBundle = require('./assets/editor.json');\r\nconst themeBundles = require('./assets/themes.json');\r\n\r\nconst DEFAULT_THEME = 'default';\r\n\r\nconst themeList = Object.keys(themeBundles.theme);\r\nconst modules = (() => {\r\n  const bundles = {};\r\n\r\n  const isModule = (target) => (target.js || target.css) && Object.keys(target).length <= 2;\r\n\r\n  const go = (target, name = '') =>\r\n    Object.keys(target).forEach((key) => {\r\n      let obj = target[key];\r\n      let objName = name ? `${name}/${key}` : key;\r\n\r\n      if (isModule(obj)) {\r\n        bundles[objName] = obj;\r\n      } else {\r\n        go(obj, objName);\r\n      }\r\n    });\r\n\r\n  go(moduleBundles);\r\n\r\n  return bundles;\r\n})();\r\n\r\nconst getEditor = () => editorBundle.lib.codemirror;\r\nconst getCss = ({ css }) => css || '';\r\nconst getJs = ({ js }) => js || '';\r\nconst getThemeList = () => [...themeList];\r\nconst getTheme = (themeName) => themeBundles.theme[themeName];\r\nconst getModuleList = () => Object.keys(modules);\r\n\r\nconst getModule = (name) => {\r\n  const bundle = modules[name];\r\n\r\n  return bundle ? { ...bundle } : null;\r\n};\r\n\r\nconst assignBundles = (target, ...sources) => {\r\n  let { js: targetJs = '', css: targetCss = '' } = target;\r\n\r\n  sources.forEach((bundle) => {\r\n    if (!bundle) return;\r\n\r\n    const { js = '', css = '' } = bundle;\r\n\r\n    targetCss = `${targetCss}${css}`;\r\n    targetJs = `${targetJs}${js}`;\r\n  });\r\n\r\n  target.css = targetCss;\r\n  target.js = targetJs;\r\n\r\n  return target;\r\n};\r\n\r\nconst bundle = (includeEditor = true, themeName = DEFAULT_THEME, modules = []) => {\r\n  const bundle = { js: '', css: '' };\r\n\r\n  if (includeEditor) {\r\n    assignBundles(bundle, getEditor());\r\n  }\r\n\r\n  if (themeName !== DEFAULT_THEME) {\r\n    assignBundles(bundle, getTheme(themeName));\r\n  }\r\n\r\n  assignBundles(bundle, ...modules.map((name) => getModule(name)));\r\n\r\n  return bundle;\r\n};\r\n\r\nclass Editor {\r\n  constructor(includeEditor = true, theme = 'default', modules = []) {\r\n    this.includeEditor = includeEditor;\r\n    this.theme = theme;\r\n    this.modules = modules;\r\n  }\r\n\r\n  setTheme(themeName) {\r\n    this.theme = themeName;\r\n  }\r\n\r\n  addModule(moduleName) {\r\n    this.modules.push(moduleName);\r\n  }\r\n\r\n  resetModules(modules) {\r\n    this.modules = modules || [];\r\n  }\r\n\r\n  clone() {\r\n    return new Editor(this.includeEditor, this.theme, [...this.modules]);\r\n  }\r\n\r\n  bundle() {\r\n    return bundle(this.includeEditor, this.theme, this.modules);\r\n  }\r\n}\r\n\r\nexports.getEditor = getEditor;\r\nexports.getCss = getCss;\r\nexports.getJs = getJs;\r\nexports.getThemeList = getThemeList;\r\nexports.getTheme = getTheme;\r\nexports.getModuleList = getModuleList;\r\nexports.getModule = getModule;\r\nexports.bundle = bundle;\r\nexports.Editor = Editor;\r\nexports.default = Editor;\r\n\r\nObject.defineProperty(exports, '__esModule', { value: true });\r\n","import { Editor } from '@actualwave/codemirror-package';\nimport webviewBundle from './webview_bundle.json';\n\nconst HTML_JS_MARK = '/*#${rn-webview-editor-js}#*/'; // eslint-disable-line no-template-curly-in-string\n\nconst HTML_CSS_MARK = '/*#${rn-webview-editor-css}#*/'; // eslint-disable-line no-template-curly-in-string\n\nexport const getWebViewHtml = () => webviewBundle['editor.html'];\n\nconst stringReplaceMark = (string, mark, content) => {\n  const index = string.indexOf(mark);\n\n  return string.substr(0, index) + content + mark + string.substr(index + mark.length);\n};\n\nexport const appendJsToWebViewHtml = (html, js) => stringReplaceMark(html, HTML_JS_MARK, js);\n// html.replace(HTML_JS_MARK, `${js}\\n${HTML_JS_MARK}`);\n\nexport const appendCssToWebViewHtml = (html, css) => stringReplaceMark(html, HTML_CSS_MARK, css);\n// html.replace(HTML_CSS_MARK, `${css}\\n${HTML_CSS_MARK}`);\n\nclass WebViewEditor extends Editor {\n  constructor(theme, modules) {\n    super(true, theme, modules);\n  }\n\n  toString() {\n    const { js, css } = this.bundle();\n\n    // add editor, theme and all modules\n    const html = appendCssToWebViewHtml(appendJsToWebViewHtml(getWebViewHtml(), js), css);\n\n    // add communication layer\n    return appendJsToWebViewHtml(\n      html,\n      `${webviewBundle['messageport-dispatcher.min.js']}\\n${webviewBundle['initscript.js']}`,\n    );\n  }\n}\n\nexport default WebViewEditor;\n","export const EditorEvent = {\n  // ping from WebView to check if connection with RN component is alive\n  INITIALIZE: 'initialize',\n\n  // RN component responds to \"initialize\" event by sending init data, like content, history and settings\n  HANDSHAKE: 'handshake',\n\n  // WebView response to handshake, it says that all init data is applied and WebView is ready for communication\n  INITIALIZED: 'initialized',\n\n  // If autoUpdateInterval > 0, then WebView will send \"autoUpdate\" in intervals event after changes to Editor content made\n  AUTO_UPDATE: 'autoUpdate',\n  SET_VALUE: 'setValue',\n  GET_VALUE: 'getValue',\n  HISTORY_UNDO: 'historyUndo',\n  HISTORY_REDO: 'historyRedo',\n  HISTORY_CLEAR: 'historyClear',\n  HISTORY_SIZE: 'historySize',\n\n  // comes from WebView when global window.onerror handler was called\n  WV_GLOBAL_ERROR: 'wvGlobalError',\n\n  // comes from WebView when global window.log handler was called\n  WV_LOG: 'wvLog',\n  SCROLL_TO_CURSOR: 'scrollToCursor',\n  UPDATE_SETTINGS: 'updateSettings',\n  EXEC_COMMAND: 'execCommand',\n};\n\nexport const EditorResponseEvent = {\n  INIT_COMPLETE: 'initialized',\n};\n\nexport const getResponseEvent = (eventType) => {\n  switch (eventType) {\n    case EditorEvent.HANDSHAKE: {\n      return EditorResponseEvent.INIT_COMPLETE;\n    }\n    default:\n      return `${eventType}Response`;\n  }\n};\n","import deferred from '@actualwave/deferred';\n\nconst stopListening = (target) => {\n  const { dispatcher, eventType, requestHandler } = target;\n\n  dispatcher.removeEventListener(eventType, requestHandler);\n  target.listening = false;\n};\n\nclass ResponseListener {\n  constructor(dispatcher, eventType) {\n    this.dispatcher = dispatcher;\n    this.eventType = eventType;\n    this.deferred = deferred();\n    this.listening = true;\n    dispatcher.addEventListener(this.eventType, this.requestHandler);\n  }\n\n  requestHandler = (event) => {\n    this.deferred.resolve(event);\n    stopListening(this);\n  };\n\n  cancel = () => {\n    if (this.listening) {\n      stopListening(this);\n    }\n  };\n\n  reject = (data = null) => {\n    if (this.listening) {\n      this.deferred.reject(data);\n      stopListening(this);\n    }\n  };\n\n  then(handler) {\n    return this.deferred.promise.then(handler);\n  }\n\n  catch(handler) {\n    return this.deferred.promise.catch(handler);\n  }\n\n  dispose = () => {\n    this.cancel();\n    delete this.dispatcher;\n    delete this.deferred;\n  };\n}\n\nexport const createResponseListenerFactory = (dispatcher) => (eventType) =>\n  new ResponseListener(dispatcher, eventType);\n\nexport default ResponseListener;\n","import { getResponseEvent } from './EditorEvent';\nimport ResponseListener from './ResponseListener';\n\nclass Request {\n  constructor(dispatcher, eventType, data = null, responseEventType = '') {\n    this.response = new ResponseListener(\n      dispatcher,\n      responseEventType || getResponseEvent(eventType),\n    );\n    dispatcher.dispatchEvent(eventType, data);\n  }\n\n  get listening() {\n    return this.response.listening;\n  }\n\n  then(handler) {\n    return this.response.then(handler);\n  }\n\n  catch(handler) {\n    return this.response.catch(handler);\n  }\n\n  cancel() {\n    this.response.cancel();\n  }\n\n  dispose() {\n    this.response.dispose();\n    this.response = null;\n  }\n}\n\nexport const createRequestFactory = (dispatcher) => (eventType, data = null) => {\n  const request = new Request(dispatcher, eventType, data);\n  return request;\n};\n\nexport default Request;\n","import { EditorEvent } from './EditorEvent';\n\nclass EditorRequests {\n  constructor(requestFactory) {\n    this.requestFactory = requestFactory;\n  }\n\n  sendRequest = (eventType, data = null, responseEventType = '') =>\n    this.requestFactory(eventType, data, responseEventType).then((event) => event && event.data);\n\n  handshake = (data) => this.sendRequest(EditorEvent.HANDSHAKE, data, EditorEvent.INITIALIZED);\n\n  setValue = (data) => this.sendRequest(EditorEvent.SET_VALUE, data);\n\n  getValue = (data) => this.sendRequest(EditorEvent.GET_VALUE, data);\n\n  historyUndo = (data) => this.sendRequest(EditorEvent.HISTORY_UNDO, data);\n\n  historyRedo = (data) => this.sendRequest(EditorEvent.HISTORY_REDO, data);\n\n  historyClear = (data) => this.sendRequest(EditorEvent.HISTORY_CLEAR, data);\n\n  historySize = (data) => this.sendRequest(EditorEvent.HISTORY_SIZE, data);\n\n  scrollToCursor = (margin) => this.sendRequest(EditorEvent.SCROLL_TO_CURSOR, margin);\n\n  updateSettings = (settings) => this.sendRequest(EditorEvent.UPDATE_SETTINGS, settings);\n\n  execCommand = (command, ...args) => this.sendRequest(EditorEvent.EXEC_COMMAND, { command, args });\n}\n\nexport default EditorRequests;\n","import MessagePortDispatcher from '@actualwave/messageport-dispatcher';\nimport Request from './Request';\nimport { EditorEvent } from './EditorEvent';\nimport EditorRequests from './EditorRequests';\n\nconst rawEvents = {\n  // FIXME don't really remember why I added this\n};\n\nconst composeErrorMessage = (event) => {\n  const { data } = event;\n\n  if (data.error) {\n    return data.error;\n  }\n\n  const { message, source, lineno, colno } = data;\n\n  return { name: 'Error', message, fileName: source, lineNumber: lineno, columnNumber: colno };\n};\n\nclass MessagePortDummy {\n  constructor(target) {\n    this.listeners = new Set();\n    this.target = target;\n  }\n\n  postMessage = (event) => this.target.postMessage(JSON.stringify(event));\n\n  addEventListener = (type, listener) => {\n    if (type !== 'message') {\n      throw new Error(`MessagePortDummy is intended for single event type and its not \"${type}\"`);\n    }\n\n    this.listeners.add(listener);\n  };\n\n  callMessageListeners = (message) => {\n    this.listeners.forEach((listener) => listener(message));\n  };\n}\n\nclass WebViewAPI extends EditorRequests {\n  webView = null;\n\n  dispatcher = null;\n\n  initialized = false;\n\n  constructor({ onInitialized, onHistorySizeUpdate, onLog, onError }) {\n    const requiestFactory = (eventType, data = null, responseEventType = '') =>\n      new Request(this.dispatcher, eventType, data, responseEventType);\n\n    super(requiestFactory);\n\n    this.handlers = { onInitialized, onHistorySizeUpdate, onLog, onError };\n  }\n\n  initialize(webView, { content, history, settings } = {}) {\n    this.initialized = false;\n    this.webView = webView;\n    this.initData = { content, history, settings };\n    this.port = new MessagePortDummy(webView);\n    this.dispatcher = new MessagePortDispatcher(this.port, null, this.preprocessIncomingMessages);\n\n    this.dispatcher.addEventListener(EditorEvent.INITIALIZE, this.webViewInitializeHandler);\n    this.dispatcher.addEventListener(EditorEvent.WV_GLOBAL_ERROR, this.webViewGlobalErrorHandler);\n    this.dispatcher.addEventListener(EditorEvent.WV_LOG, this.webViewLogHandler);\n  }\n\n  /**\n   * @private\n   */\n  preprocessIncomingMessages = (event) => {\n    const { data: eventData } = event;\n\n    if (rawEvents[event.type]) {\n      return event;\n    }\n\n    if (eventData && typeof eventData === 'object') {\n      const { meta, data } = eventData;\n\n      if (meta) {\n        this.readMessageMetaData(meta);\n        event.data = data;\n      }\n    }\n\n    return event;\n  };\n\n  /**\n   * @private\n   */\n  readMessageMetaData(meta) {\n    const { historySize } = meta;\n    const { onHistorySizeUpdate } = this.handlers;\n\n    if (onHistorySizeUpdate) {\n      onHistorySizeUpdate(historySize);\n    }\n  }\n\n  /**\n   * @private\n   */\n  webViewInitializeHandler = () => {\n    this.handshake(this.initData).then(this.webViewInitializedHandler);\n  };\n\n  /**\n   * @private\n   */\n  webViewInitializedHandler = () => {\n    this.initialized = true;\n    this.initData = {};\n\n    this.handlers.onInitialized(this);\n  };\n\n  /**\n   * @private\n   */\n  webViewLogHandler = (event) => {\n    const { onLog } = this.handlers;\n\n    if (!onLog) {\n      return;\n    }\n\n    onLog(...event.data);\n  };\n\n  /**\n   * @private\n   */\n  webViewGlobalErrorHandler = (event) => {\n    const { onError } = this.handlers;\n\n    if (!onError) {\n      return;\n    }\n\n    onError(composeErrorMessage(event));\n  };\n\n  addEventListener = (eventType, listener) => this.dispatcher.addEventListener(eventType, listener);\n\n  hasEventListener = (eventType) => this.dispatcher.hasEventListener(eventType);\n\n  removeEventListener = (eventType, listener) =>\n    this.dispatcher.removeEventListener(eventType, listener);\n\n  dispatchEvent = (event, data = null) => this.dispatcher.dispatchEvent(event, data);\n\n  onMessage = (event) => this.port.callMessageListeners(event);\n}\n\nexport default WebViewAPI;\n","import React from 'react';\nimport { View, Text } from 'react-native';\n\nconst BlockingView = () => {\n  return (\n    <View\n      style={{\n        position: 'absolute',\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n        backgroundColor: '#00000066',\n        justifyContent: 'center',\n        alignItems: 'center',\n      }}\n    >\n      <Text\n        style={{\n          color: '#fff',\n          fontSize: 12,\n        }}\n      >\n        Initializing, please wait...\n      </Text>\n    </View>\n  );\n};\n\nexport default BlockingView;\n","/* eslint-disable */\nconst DEFAULT_SETTINGS = {\n  gutters: ['CodeMirror-linenumbers', 'CodeMirror-foldgutter'],\n  inputStyle: 'contenteditable',\n  styleActiveLine: true,\n};\n\nexport const generateInitScript = (editorSettings, theme = '', autoUpdateInterval = 1000) => {\n  const settings = {\n    ...DEFAULT_SETTINGS,\n    ...editorSettings,\n  };\n\n  if (theme) {\n    settings.theme = theme;\n  }\n\n  return `\n(function () {\n  runEditor(${JSON.stringify(settings, null, 2)}, ${\n    autoUpdateInterval > 0 ? autoUpdateInterval : 0\n  });\n})();\n`;\n};\n","import React, { Component } from 'react';\nimport { View, WebView } from 'react-native';\nimport PropTypes from 'prop-types';\nimport WebViewEditor from '../assets/webview';\nimport WebViewAPI from '../event/WebViewAPI';\nimport BlockingView from './BlockingView';\nimport { generateInitScript } from './utils';\n\nclass BaseEditorView extends Component {\n  static propTypes = {\n    onInitialized: PropTypes.func.isRequired,\n    onHistorySizeUpdate: PropTypes.func.isRequired,\n    onLog: PropTypes.func.isRequired,\n    onError: PropTypes.func.isRequired,\n    renderBlockingView: PropTypes.func,\n    autoUpdateInterval: PropTypes.number,\n    theme: PropTypes.string,\n    modules: PropTypes.arrayOf(PropTypes.string),\n    content: PropTypes.string,\n    settings: PropTypes.shape({}),\n  };\n\n  static defaultProps = {\n    renderBlockingView: () => <BlockingView />,\n    autoUpdateInterval: 1000,\n    theme: undefined,\n    settings: {\n      inputStyle: 'contenteditable',\n      styleActiveLine: true,\n    },\n    modules: [\n      'addon/fold/foldgutter',\n      'addon/edit/matchbrackets',\n      'addon/edit/matchtags',\n      'addon/search/match-highlighter',\n      'addon/edit/closebrackets',\n      'addon/edit/closetag',\n      'addon/fold/foldcode',\n      'addon/fold/foldgutter',\n      'addon/fold/brace-fold',\n      'addon/fold/comment-fold',\n      'addon/fold/indent-fold',\n      'addon/fold/xml-fold',\n    ],\n    content: '',\n  };\n\n  api = null;\n\n  webView = null;\n\n  constructor(props, ...args) {\n    super(props, ...args);\n\n    this.editor = new WebViewEditor(props.theme, props.modules);\n\n    this.state = {\n      initialized: false,\n      html: this.editor.toString(),\n      initScript: generateInitScript(props.settings, props.theme, props.autoUpdateInterval),\n    };\n\n    this.api = new WebViewAPI({\n      onInitialized: (api) => this.onWebViewInitialized(api),\n      onHistorySizeUpdate: (size) => this.onWebViewHistorySizeUpdate(size),\n      onLog: (log) => this.onWebViewLog(log),\n      onError: (error) => this.onWebViewGlobalError(error),\n    });\n  }\n\n  componentWillReceiveProps({ theme: newTheme, modules: newModules, settings: newSettings }) {\n    const { theme, modules, settings } = this.props;\n\n    if (newTheme !== theme || newModules !== modules) {\n      this.updateEditorHtml();\n    }\n\n    if (newTheme !== theme || newSettings !== settings) {\n      this.updateInitScript();\n    }\n  }\n\n  updateEditorHtml({ theme, modules } = this.props) {\n    this.editor.setTheme(theme);\n    this.editor.resetModules([...modules]);\n\n    this.setState({ html: this.editor.toString() });\n  }\n\n  updateInitScript({ settings, theme, autoUpdateInterval } = this.props) {\n    this.setState({ initScript: generateInitScript(settings, theme, autoUpdateInterval) });\n  }\n\n  get editorBaseUrl() {\n    return 'https://actualwave.com/';\n  }\n\n  onWebViewInitialized(api) {\n    this.setState({ initialized: true }, () => {\n      const { onInitialized } = this.props;\n\n      onInitialized(api);\n    });\n  }\n\n  onWebViewLog(log) {\n    const { onLog } = this.props;\n\n    onLog(log);\n  }\n\n  onWebViewGlobalError(error) {\n    const { onError } = this.props;\n\n    onError(error);\n  }\n\n  onWebViewHistorySizeUpdate(size) {\n    const { onHistorySizeUpdate } = this.props;\n\n    onHistorySizeUpdate(size);\n  }\n\n  handleWebViewReference = (webView) => {\n    const { content, settings } = this.props;\n    this.webView = webView;\n\n    this.setState({\n      initialized: false,\n    });\n\n    if (webView) {\n      this.api.initialize(webView, { content, settings });\n    }\n  };\n\n  renderBlockingView() {\n    const { renderBlockingView } = this.props;\n    const { initialized } = this.state;\n\n    if (!initialized) {\n      return renderBlockingView();\n    }\n    return null;\n  }\n\n  render() {\n    const { html, initScript } = this.state;\n\n    return (\n      <View style={{ position: 'relative', flex: 1 }}>\n        <WebView\n          ref={this.handleWebViewReference}\n          onMessage={this.api.onMessage}\n          onError={(...args) => console.log('WebView Load Error:', ...args)}\n          source={{\n            html,\n            baseUrl: this.editorBaseUrl,\n          }}\n          injectedJavaScript={initScript}\n          style={{ flex: 1 }}\n          javaScriptEnabled\n          originWhitelist={[]}\n        />\n        {this.renderBlockingView()}\n      </View>\n    );\n  }\n}\n\nexport default BaseEditorView;\n","import PropTypes from 'prop-types';\nimport BaseEditorView from './BaseEditorView';\nimport { EditorEvent, getResponseEvent } from '../event/EditorEvent';\n\nclass CodeEditor extends BaseEditorView {\n  static propTypes = {\n    ...BaseEditorView.propTypes,\n    onContentUpdate: PropTypes.func.isRequired,\n  };\n\n  static defaultProps = {\n    ...BaseEditorView.defaultProps,\n  };\n\n  currentContent = '';\n\n  componentWillMount() {\n    const { settings, modules } = this.props;\n\n    // FIXME Add a way to reset theme and modules, cache resulting string to not re-generate HTML\n    this.editor.modules = modules;\n\n    this.sendUpdatedSettings(settings);\n  }\n\n  componentWillReceiveProps(props) {\n    const { content, settings } = props;\n\n    super.componentWillReceiveProps(props);\n\n    this.sendUpdatedContent(content);\n    this.sendUpdatedSettings(settings);\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    return this.state.initialized !== nextState.initialized;\n  }\n\n  onWebViewInitialized(api) {\n    super.onWebViewInitialized(api);\n\n    this.sendUpdatedContent(this.props.content);\n    this.sendUpdatedSettings(this.props.settings);\n\n    this.api.addEventListener(getResponseEvent(EditorEvent.GET_VALUE), this.onGetValueResponse);\n    this.api.addEventListener(EditorEvent.AUTO_UPDATE, this.onGetValueResponse);\n  }\n\n  onInitialize(content = '') {\n    this.currentContent = content || this.props.content;\n    super.onInitialize(this.currentContent);\n  }\n\n  onGetValueResponse = (event) => {\n    const content = event.data;\n    this.currentContent = content;\n    this.props.onContentUpdate(content);\n  };\n\n  sendUpdatedContent(content, force = false) {\n    if (force || (this.state.initialized && this.currentContent !== content)) {\n      this.api.setValue(content);\n\n      if (force) {\n        this.api.historyClear();\n      }\n\n      this.currentContent = content;\n    }\n  }\n\n  sendUpdatedSettings(settings) {\n    if (this.state.initialized) {\n      this.api.updateSettings(settings);\n    }\n  }\n}\n\nexport default CodeEditor;\n"],"names":["_typeof","HTML_JS_MARK","HTML_CSS_MARK","getWebViewHtml","webviewBundle","stringReplaceMark","string","mark","content","index","indexOf","substr","length","appendJsToWebViewHtml","html","js","appendCssToWebViewHtml","css","WebViewEditor","theme","modules","bundle","Editor","EditorEvent","INITIALIZE","HANDSHAKE","INITIALIZED","AUTO_UPDATE","SET_VALUE","GET_VALUE","HISTORY_UNDO","HISTORY_REDO","HISTORY_CLEAR","HISTORY_SIZE","WV_GLOBAL_ERROR","WV_LOG","SCROLL_TO_CURSOR","UPDATE_SETTINGS","EXEC_COMMAND","EditorResponseEvent","INIT_COMPLETE","getResponseEvent","eventType","stopListening","target","dispatcher","requestHandler","removeEventListener","listening","ResponseListener","event","deferred","resolve","cancel","reject","data","dispose","addEventListener","handler","promise","then","catch","Request","responseEventType","response","dispatchEvent","EditorRequests","requestFactory","sendRequest","handshake","setValue","getValue","historyUndo","historyRedo","historyClear","historySize","scrollToCursor","margin","updateSettings","settings","execCommand","command","args","rawEvents","composeErrorMessage","error","message","source","lineno","colno","name","fileName","lineNumber","columnNumber","MessagePortDummy","postMessage","JSON","stringify","type","listener","Error","listeners","add","callMessageListeners","forEach","Set","WebViewAPI","onInitialized","onHistorySizeUpdate","onLog","onError","requiestFactory","webView","initialized","preprocessIncomingMessages","eventData","meta","readMessageMetaData","webViewInitializeHandler","initData","webViewInitializedHandler","handlers","webViewLogHandler","webViewGlobalErrorHandler","hasEventListener","onMessage","port","history","MessagePortDispatcher","BlockingView","View","position","top","right","bottom","left","backgroundColor","justifyContent","alignItems","React","Text","color","fontSize","DEFAULT_SETTINGS","gutters","inputStyle","styleActiveLine","generateInitScript","editorSettings","autoUpdateInterval","BaseEditorView","props","api","handleWebViewReference","setState","initialize","editor","state","toString","initScript","onWebViewInitialized","size","onWebViewHistorySizeUpdate","log","onWebViewLog","onWebViewGlobalError","newTheme","newModules","newSettings","updateEditorHtml","updateInitScript","setTheme","resetModules","renderBlockingView","flex","WebView","console","baseUrl","editorBaseUrl","Component","propTypes","PropTypes","func","isRequired","number","arrayOf","shape","defaultProps","undefined","CodeEditor","currentContent","onGetValueResponse","onContentUpdate","sendUpdatedSettings","_get","sendUpdatedContent","nextProps","nextState","force"],"mappings":"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"}